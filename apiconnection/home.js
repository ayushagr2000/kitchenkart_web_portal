window.onload = function() {
    popular_brand()
    //brand('Avinash');
    Banner_ApiCall();
    //Banner('Avinash');
    Featured_ProductsApi();
    // Featured('Avinash');
}
async function popular_brand() {
    const proxyurl = "https://cors-anywhere.herokuapp.com/";
    const url = "http://ec2-13-232-236-5.ap-south-1.compute.amazonaws.com:3000/api/brand";
    fetch(proxyurl + url)
    .then(response => response.text())
    .then(contents => brand(contents))
    .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
}

async function brand(data) {
    var data_json = JSON.parse(data);
    var k = "<div class='container'><div class='row'>";
    console.log(data_json.response[0].brand_name);
    console.log(data_json);

    for(var i = 0; i < data_json.response.length; i++) {
        console.log(i);
        k += "<div class='rounded col-sm img-fluid' style='padding: 35px; margin:5px;'> <a href='#'><img src='"+data_json.response[i].brand_img+"'alt='"+data_json.response[i].brand_name+"' style='margin: auto;'/></a> </div>";
        if((i+1) % 5 == 0){
           k += "</div></div><div class='container' style><div class='row'>";
        }
    }
   
    document.getElementById("Popular_brand_div").innerHTML = k + '</div></div>';   
}


async function Banner_ApiCall() {
    const proxyurl = "https://cors-anywhere.herokuapp.com/";
    const url = "http://ec2-13-232-236-5.ap-south-1.compute.amazonaws.com:3000/api/banner/homepage1";
    fetch(proxyurl + url)
    .then(response => response.text())
    .then(contents => Banner(contents))
    .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
}

async function Banner(Data) {
    var data_json = JSON.parse(Data);
    var bannercount = '<div class="carousel-item active"><img class="d-block w-100" src="'+data_json.response[0].banner_url+'" style="height: 350px;"><a class="carousel-control-prev" style="width: 100%;"></a></div>'; 
    var BannerImage = '<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active" style="background-color: red;"></li>';

    for(var i = 1; i < data_json.response.length; i++) {
        BannerImage += '<li data-target="#carouselExampleIndicators" data-slide-to="'+(i)+'"style="background-color: red;"></li>';
        bannercount+= '<div class="carousel-item "><img class="d-block w-100" src="'+data_json.response[i].banner_url+'" style="height: 350px;"><a class="carousel-control-prev" style="width: 45%;"></a></div>';
    }
   
    document.getElementById('BannerImage').innerHTML = bannercount;
    document.getElementById('BannerCount').innerHTML = BannerImage;
}

async function Featured_ProductsApi() {
    const proxyurl = "https://cors-anywhere.herokuapp.com/";
    const url = "http://ec2-13-232-236-5.ap-south-1.compute.amazonaws.com:3000/api/product/tag/new";
    fetch(proxyurl + url)
    .then(response => response.text())
    .then(contents => Featured(contents))
    .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))
}

async function Featured(FeaturedData){
    console.log('Featured Data')
    var data_json = JSON.parse('{"status":200,"error":null,"response":[{"serial_id":1302,"product_id":10007,"name":"Tulsi Dried Kiwi","max_price":155,"sell_price":130,"size":"200 gm","remark":null,"tag":"kakadryfruits","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kakadryfruits","max_qty":null,"stock_status":2,"category":"Dryfruits","brand":"Tulsi","subcat":"dryfruits","img":"https://n2.sdlcdn.com/imgs/b/6/j/Tulsi-Dried-Kiwi-250-g-SDL704063908-1-f8f9d.jpg","margin":5,"id":1,"vendor_name":"Kaka DryFruits","imageLink":"http://media.blogto.com/articles/0d5b-20141228-best-kitchen-supply-stores-toronto.jpg?width=1300&quality=70","latitide":"24.912460","longitude":"79.590488","address":"Chatrasal Chowk","title":"Premium DryFruits"},{"serial_id":1777,"product_id":10483,"name":"Haldiram Rasgulla Chena","max_price":185,"sell_price":180,"size":"1 kg","remark":null,"tag":"kshamaprovision","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kshamaprovision","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Haldiram","subcat":"sweets","img":"https://www.haldirams.com/media/catalog/product/cache/3/image/800x/602f0fa2c1f0d1ba5e241f914e856ff9/r/a/rasgulla_6.jpg","margin":5,"id":3,"vendor_name":"KK Store","imageLink":"http://media.blogto.com/articles/0d5b-20141228-best-kitchen-supply-stores-toronto.jpg?width=1300&quality=70","latitide":"24.912460","longitude":"79.590488","address":"Panna Road","title":"Grocery Store"},{"serial_id":1800,"product_id":10506,"name":"Britannia Good Day Butter Cookies Biscuits","max_price":30,"sell_price":29,"size":"200 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Britannia","subcat":"biscuit","img":"https://tse4.mm.bing.net/th?id=OIP.oeSNf5J_0oHcw57HXNGG8gAAAA&pid=Api&P=0&w=300&h=300","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":1801,"product_id":10507,"name":"Britannia Good Day Pista Cookies Biscuits","max_price":40,"sell_price":39,"size":"200 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Britannia","subcat":"biscuit","img":"https://www.bigbasket.com/media/uploads/p/l/40075987_3-britannia-good-day-pista-badam-cookies.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":1802,"product_id":10508,"name":"Britannia Good Day Cashew Biscuits","max_price":35,"sell_price":34,"size":"200 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Britannia","subcat":"biscuit","img":"https://bazarlec.com/image/cache/catalog/Products/Bakery-confectionery/Biscuits/Good-day-Cashew-Cookies-200gm-500x500.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2003,"product_id":10709,"name":"Tops Dosa Powder","max_price":60,"sell_price":55,"size":"1 pc","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Staples","brand":"Tops","subcat":"atta","img":"https://www.dbgmart.com/wp-content/uploads/2017/02/tops-plain-dosa.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2005,"product_id":10711,"name":"Tops Rice Idli Instant Mix","max_price":60,"sell_price":55,"size":"200 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Staples","brand":"Tops","subcat":"readytoeat","img":"https://bazarlec.com/image/cache/catalog/Products/ready-to-cook/South-indian-raw/Tops-Rice-Idli-400x400.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2115,"product_id":10821,"name":"Fuse Chocolate","max_price":20,"sell_price":19,"size":"25 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Cadbury","subcat":"Choclates","img":"https://www.bigbasket.com/media/uploads/p/l/40091018-2_3-cadbury-chocolate-bar-fuse.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2353,"product_id":11059,"name":"Haldiram Pasta","max_price":20,"sell_price":19,"size":"200 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Haldiram","subcat":"noodle","img":"https://tse1.mm.bing.net/th?id=OIP.xJQtDrcRi8vSTMR02RrxBQHaHa&pid=Api&P=0&w=300&h=300","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2356,"product_id":11062,"name":"Yipee Noodles","max_price":45,"sell_price":43,"size":"280 gm","remark":null,"tag":"kksale","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"kksale","max_qty":null,"stock_status":2,"category":"Snacks","brand":"Yipee","subcat":"noodle","img":"http://ecx.images-amazon.com/images/I/414hacZ6QWL._SX300_QL70_.jpg","margin":5,"id":9,"vendor_name":"Kitchen Kart Sale","imageLink":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Independence%20day%20sale%20main.png?alt=media&token=5c9f7b5a-3f17-401c-98","latitide":"23","longitude":"23","address":"dasd","title":"Kitchen kart sale"},{"serial_id":2485,"product_id":11191,"name":"Fragranced Talc Powder Floral Bloom","max_price":199,"sell_price":178,"size":"400 gm","remark":null,"tag":"kitchenkart","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"Kitchenkart","max_qty":null,"stock_status":2,"category":"Cosmetics","brand":"oriflame","subcat":"facepowder","img":"https://media-asia-cdn.oriflame.com/-/media/images/externalImage.ashx?externalMediaId=product-management-media%2f34100%2f34100.png%3fversion%3d1591115979&w=534&h=534&imageFormat=Jpeg&ib=%23F5F5F5&q=70","margin":20,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":2486,"product_id":11192,"name":"Fragranced Talc Powder Sandal Caress","max_price":199,"sell_price":178,"size":"400 gm","remark":null,"tag":"kitchenkart","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"Kitchenkart","max_qty":null,"stock_status":2,"category":"Cosmetics","brand":"oriflame","subcat":"facepowder","img":"https://media-asia-cdn.oriflame.com/-/media/images/externalImage.ashx?externalMediaId=product-management-media%2f34103%2f34103.png%3fversion%3d1591115982&w=534&h=534&imageFormat=Jpeg&ib=%23F5F5F5&q=70","margin":20,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":2497,"product_id":11203,"name":"Optifresh Kids Toothpaste","max_price":99,"sell_price":95,"size":"50 ml","remark":null,"tag":"kitchenkart","descp":"Kitchen Kart is an exciting place for the whole family to shop at reasonable prices. We offer safe home delivery from authorized kirana shops nearby within 24 hours. Chhatarpur’s favourite app gets you all essential products that includes groceries, households and personal care items. We promote professionalism and genuineness in providing your gateway to great shopping.","vendor_tag":"Kitchenkart","max_qty":null,"stock_status":2,"category":"cleaning","brand":"oriflame","subcat":"ToothPaste","img":"https://media-asia-cdn.oriflame.com/-/media/images/externalImage.ashx?externalMediaId=product-management-media%2f31133%2f31133.png%3fversion%3d1591117208&w=534&h=534&imageFormat=Jpeg&ib=%23F5F5F5&q=70","margin":20,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":3858,"product_id":11955,"name":"Smiley Creamy Cake","max_price":220,"sell_price":200,"size":"1 pound","remark":null,"tag":"kitchenkart","descp":"Call 9893854119 for customized Cake Orders","vendor_tag":"KitchenKart","max_qty":null,"stock_status":2,"category":"cakes","brand":"cakes","subcat":"cakes","img":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Cakes%2Fsmile_cake.jpeg?alt=media&token=e8511e3a-174e-4ef4-b54d-053edf0a0426","margin":40,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":3859,"product_id":11956,"name":"Vanila Cake (Heart Shaped)","max_price":360,"sell_price":350,"size":"2 pound","remark":null,"tag":"kitchenkart","descp":"Call 9893854119 for customized Cake Orders","vendor_tag":"KitchenKart","max_qty":null,"stock_status":2,"category":"cakes","brand":"cakes","subcat":"cakes","img":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Cakes%2Fheart_shaped_cake.jpeg?alt=media&token=f51c35de-a158-4ed2-a988-8ef8ddbdd0c2","margin":40,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":3860,"product_id":11957,"name":"Black Forest Cake","max_price":210,"sell_price":200,"size":"1 pound","remark":null,"tag":"kitchenkart","descp":"Call 9893854119 for customized Cake Orders","vendor_tag":"KitchenKart","max_qty":null,"stock_status":2,"category":"cakes","brand":"cakes","subcat":"cakes","img":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Cakes%2Fchoco_chery_cake.jpeg?alt=media&token=ab7633b5-e5ed-4cb9-aac5-fdb1f734c2cb","margin":40,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"},{"serial_id":3861,"product_id":11958,"name":"Boston Cream Cake","max_price":220,"sell_price":200,"size":"1 pound","remark":null,"tag":"kitchenkart","descp":"Call 9893854119 for customized Cake Orders","vendor_tag":"KitchenKart","max_qty":null,"stock_status":2,"category":"cakes","brand":"cakes","subcat":"cakes","img":"https://firebasestorage.googleapis.com/v0/b/kitchenkart-3b889.appspot.com/o/Cakes%2Fwhite_blue_cake.jpeg?alt=media&token=b392f05a-d186-493e-b5a6-d2af11c758aa","margin":40,"id":7,"vendor_name":"Kitchen Kart","imageLink":"ewr","latitide":"324","longitude":"ewrew","address":"342","title":"432324"}]}');
    var featureddiv = '';
    for(var i = 0; i < data_json.response.length; i++){
        featureddiv += '<div class="product-items col-6 col-sm-4 col-md-4 col-lg-3" style="height:400px;"><div class="product-thumb transition"><div class="image"><div class="first_image"> <a href="product_detail_page.html"> <img src="'+data_json.response[i].img+'"  style="height:200px; width:200px;" alt="'+data_json.response[i].name+'" title="'+data_json.response[i].name+'" class="img-responsive"> </a> </div><div class="swap_image"> <a href="product_detail_page.html"> </a></div></div><div class="product-details"  style="height:180px;"><div class="caption"><h4><a href="product_detail_page.html">'+data_json.response[i].name+'</a></h4><p class="price">&#8377; &nbsp;'+data_json.response[i].sell_price+'<span class="price-tax">&#8377; &nbsp;</span></p><div class="product_option "><div class="form-group required "><p style="float: left;">size : '+data_json.response[i].size+'</p><p style="float: right;"> Discount '+Math.round(100-(data_json.response[i].sell_price/data_json.response[i].max_price * 100))+'%</p><br><p style="float: right;"> MRP &#8377;&nbsp;'+data_json.response[i].max_price+'</p></div><div class="input-group button-group"><label class="control-label">Qty</label><input type="number" id="qty'+i+'" name="quantity" min="1" value="1" step="1" class="qty form-control"><button type="button" class="addtocart pull-right" id="cart'+i+'" onclick(this.id)>Add</button></div></div></div></div></div></div>';
    }
    document.getElementById('FeaturedProductDiv').innerHTML = featureddiv;
}